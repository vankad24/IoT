# –ü—è—Ç—å –°–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ —Å –†–∞–∑–Ω—ã–º–∏ –ß–∞—Å—Ç–æ—Ç–∞–º–∏

## üí° –û–±–∑–æ—Ä
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—è—Ç—å—é —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ Arduino Uno. –ö–∞–∂–¥—ã–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –º–∏–≥–∞–µ—Ç —Å **—Ä–∞–∑–Ω–æ–π, —Ç–æ—á–Ω–æ –∑–∞–¥–∞–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π**. –í—Å—è –ª–æ–≥–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **–æ–¥–Ω–æ–≥–æ 16-–±–∏—Ç–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ (Timer1)** –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π Arduino (`delay()`, `millis()`, `pinMode()`, `digitalWrite()`).

## ‚ú® –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –î–µ—Ç–∞–ª–∏

### 1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–π –ß–∞—Å—Ç—å—é (–†–µ–≥–∏—Å—Ç—Ä—ã)

* **–ü–æ—Ä—Ç:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **PORTB** (–ø–∏–Ω—ã PB0‚ÄìPB4), –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ –ø–ª–∞—Ç–µ Arduino Uno —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ü–∏—Ñ—Ä–æ–≤—ã–º –ø–∏–Ω–∞–º **D8‚ÄìD12**.
* **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ I/O:** –ü–∏–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –≤—ã–≤–æ–¥ (Output) –ø—É—Ç–µ–º –ø—Ä—è–º–æ–≥–æ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–º **`DDRB`** (Data Direction Register B).
* **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π:** –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ **`PORTB`** —Å –ø–æ–º–æ—â—å—é **–ø–æ–±–∏—Ç–æ–≤–æ–≥–æ –∏—Å–∫–ª—é—á–∞—é—â–µ–≥–æ –ò–õ–ò (`^`)** –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ –±–∏—Ç–∞.

### 2. –¢–æ—á–Ω—ã–π –¢–∞–π–º–∏–Ω–≥ (Timer1)

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Timer1** ‚Äì 16-–±–∏—Ç–Ω—ã–π —Ç–∞–π–º–µ—Ä:

* **–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:** **CTC** (Clear Timer on Compare Match, –±–∏—Ç `WGM12`). –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ —Ç–∞–π–º–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è **`OCR1A`**.
* **–ü—Ä–µ–¥–¥–µ–ª–∏—Ç–µ–ª—å (Prescaler):** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ **256** (–±–∏—Ç `CS12`).
    * –ß–∞—Å—Ç–æ—Ç–∞ —Ç–∞–π–º–µ—Ä–∞: $F_{CPU} / 256 = 16\text{ –ú–ì—Ü} / 256 = 62500\text{ –ì—Ü}$.
* **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è:** –†–µ–≥–∏—Å—Ç—Ä —Å—Ä–∞–≤–Ω–µ–Ω–∏—è **`OCR1A`** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ **624**.
    * –ß–∞—Å—Ç–æ—Ç–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π: $62500 / (624 + 1) = 100\text{ –ì—Ü}$.
    * **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–∞–∫—Ç:** –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∂–¥—ã–µ **10 –º—Å**. –≠—Ç–æ –Ω–∞—à–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤—Ä–µ–º–µ–Ω–∏, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –±–∞–∑–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –ø–µ—Ä–∏–æ–¥—ã.

### 3. –õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

–í—Å—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è **`ISR(TIMER1_COMPA_vect)`**:

1.  **–°—á–µ—Ç—á–∏–∫–∏:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –ø—è—Ç–∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –≤–µ–¥–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫ (`led_counters[i]`).
2.  **–ü–µ—Ä–∏–æ–¥—ã:** –ú–∞—Å—Å–∏–≤ **`PERIODS`** —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–µ–±—É–µ–º–æ–µ –≤—Ä–µ–º—è –º–∏–≥–∞–Ω–∏—è –≤ *—Ç–∞–∫—Ç–∞—Ö –ø–æ 10 –º—Å* (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1000` —Ç–∞–∫—Ç–æ–≤ = 10 —Å–µ–∫—É–Ω–¥).
3.  **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:** –ö–∞–∂–¥–æ–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫. –ö–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —Å–≤–æ–µ–≥–æ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ `PERIODS[i]`, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `PORTB ^= PINS[i];`, –∞ —Å—á–µ—Ç—á–∏–∫ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è.

## üíª –°—Ö–µ–º–∞ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–°–≤–µ—Ç–æ–¥–∏–æ–¥—ã (—Å —Ç–æ–∫–æ–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–º–∏ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞–º–∏ $\approx 220\text{ –û–º}$) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –ø–∏–Ω–∞–º **PORTB**:

| –ü–∏–Ω AVR | –ü–∏–Ω Arduino Uno | –û–ø–∏—Å–∞–Ω–∏–µ –≤ –∫–æ–¥–µ | –ü–µ—Ä–∏–æ–¥ (–≤ —Ç–∞–∫—Ç–∞—Ö 10 –º—Å) | –ü—Ä–∏–±–ª–∏–∑. –ø–µ—Ä–∏–æ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è |
| :------ | :-------------- | :-------------- | :--------------------- | :--------------------------- |
| **PB4** | D12 | LED A | 1000 | 10.0 —Å–µ–∫ |
| **PB3** | D11 | LED B | 2000 | 20.0 —Å–µ–∫ |
| **PB2** | D10 | LED C | 3000 | 30.0 —Å–µ–∫ |
| **PB1** | D9 | LED D | 4000 | 40.0 —Å–µ–∫ |
| **PB0** | D8 | LED E | 5000 | 50.0 —Å–µ–∫ |

## üîë –ö–ª—é—á–µ–≤—ã–µ –ü—Ä–∏–Ω—Ü–∏–ø—ã AVR C++

* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **`#include <avr/io.h>`** –∏ **`#include <avr/interrupt.h>`** –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏.
* **–ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å:** –û–ø–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è `PORTB ^= PINS[i];` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (`ISR`), –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—è —Ç–æ—á–Ω—ã–π —Ç–∞–π–º–∏–Ω–≥.
* **–¶–∏–∫–ª `loop()` –ø—É—Å—Ç:** –í–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –º–∏–≥–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–µ–Ω –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º —Ç–∞–π–º–µ—Ä–æ–º, –æ—Å–≤–æ–±–æ–∂–¥–∞—è –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á.

## üîó –°—Å—ã–ª–∫–∏

* üß∞ **[Tinkercad-—Å—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](https://www.tinkercad.com/things/hIsimIXBaj1-ledcascade?sharecode=pz0Y-dADFJBDHdQd1IEdDpYpHGG9QNlxUHAc78M5zSg)**

---

